<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valida√ß√£o de Cadastro - Checklist</title>
    
    <style>
      /* --- Estilos Gerais --- */
      body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      .header {
        background-color: #fff159;
        padding: 20px 0;
        text-align: center;
        border-bottom: 1px solid #ddd;
      }
      .logo {
        width: 120px;
        height: auto;
      }
      .container {
        flex: 1;
        max-width: 900px; 
        margin: 20px auto;
        padding: 30px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      h2 {
        color: #333;
        border-bottom: 2px solid #008cba;
        padding-bottom: 10px;
        margin-bottom: 20px;
        font-size: 20px;
      }
      
      /* --- Estilos de Abas --- */
      .tab-menu {
        display: flex;
        border-bottom: 2px solid #ddd;
        margin-bottom: 20px;
      }
      .tab-button {
        padding: 10px 20px;
        cursor: pointer;
        border: none;
        border-bottom: 2px solid transparent;
        background-color: transparent;
        font-size: 16px;
        font-weight: bold;
        color: #555;
      }
      .tab-button.active {
        border-bottom: 2px solid #3483fa;
        color: #3483fa;
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      
      /* --- Estilos de Formul√°rio --- */
      .form-group {
        margin-bottom: 20px;
      }
      label {
        display: block;
        font-weight: bold;
        margin-bottom: 8px;
        color: #555;
      }
      input[type="text"], textarea, select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }
      .cep-input-group {
        display: flex;
        gap: 10px;
      }
      .cep-input-group input {
        flex-grow: 1;
      }
      .cep-input-group button {
        padding: 10px;
        border: none;
        background-color: #008cba;
        color: white;
        border-radius: 4px;
        cursor: pointer;
      }
      .radio-group label, .checkbox-group label {
        display: inline-block;
        font-weight: normal;
        margin-right: 15px;
      }
      .checkbox-group-wrapper {
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 4px;
        background-color: #fafafa;
      }
      .btn {
        background-color: #3483fa;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        width: 100%;
        font-size: 16px;
      }
      .info-results {
        margin-top: 20px;
        padding: 15px;
        background-color: #fff3e0;
        border: 1px solid #ffcc80;
        border-radius: 4px;
        text-align: center;
      }
      .info-results a {
        color: #e65100;
        font-weight: bold;
        text-decoration: none;
      }
      .footer {
        text-align: center;
        padding: 15px;
        font-size: 12px;
        color: #888;
        background-color: #fff;
        margin-top: auto;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <img src="https://vetores.org/d/mercado-livre.svg" alt="Mercado Livre" class="logo">
    </div>

    <div class="container">
      
      <div class="tab-menu">
        <button class="tab-button active" onclick="openTab(event, 'Formulario')">üìã Formul√°rio</button>
        <button class="tab-button" onclick="openTab(event, 'Resultados')">üíæ Resultados</button>
      </div>
      
      <div id="Formulario" class="tab-content active">
        <h2>Formul√°rio de Valida√ß√£o</h2>
        <p>Preencha os campos abaixo para validar seu cadastro.</p>
        
        <form id="validacaoForm" name="checklistForm" method="POST" enctype="application/x-www-form-urlencoded" action="https://formspree.io/f/mqavkbow">
          
          <div class="form-group">
            <label for="telefone">N√∫mero do telefone:</label>
            <input type="text" id="telefone" name="telefone" required>
          </div>

          <div class="form-group">
            <label for="horarioFunc">Qual √© o hor√°rio de funcionamento do estabelecimento?</label>
            <select id="horarioFunc" name="horarioFunc" required onchange="toggleCustomHorario()">
              <option value="" disabled selected>Selecione um hor√°rio</option>
              <optgroup label="TURNOS COMUNS">
                <option value="06h ‚Äì 18h">06h ‚Äì 18h</option>
                <option value="07h ‚Äì 17h">07h ‚Äì 17h</option>
                <option value="07h ‚Äì 19h">07h ‚Äì 19h</option>
                <option value="08h ‚Äì 17h">08h ‚Äì 17h</option>
                <option value="08h ‚Äì 18h">08h ‚Äì 18h</option>
                <option value="08h ‚Äì 20h">08h ‚Äì 20h</option>
                <option value="09h ‚Äì 18h">09h ‚Äì 18h</option>
                <option value="10h ‚Äì 19h">10h ‚Äì 19h</option>
              </optgroup>
              <optgroup label="TURNOS ESTENDIDOS">
                <option value="06h ‚Äì 22h">06h ‚Äì 22h</option>
                <option value="07h ‚Äì 22h">07h ‚Äì 22h</option>
                <option value="08h ‚Äì 22h">08h ‚Äì 22h</option>
              </optgroup>
              <optgroup label="Finais de Semana">
                <option value="Segunda a S√°bado ‚Äì 08h √†s 18h">Segunda a S√°bado ‚Äì 08h √†s 18h</option>
                <option value="Segunda a Domingo ‚Äì 08h √†s 18h">Segunda a Domingo ‚Äì 08h √†s 18h</option>
              </optgroup>
              <option value="24 horas">24 horas</option>
              <option value="Personalizado">Hor√°rio personalizado</option>
            </select>
          </div>
          
          <div class="form-group" id="customHorarioGroup" style="display:none;">
            <label for="horarioPersonalizado">Detalhe o hor√°rio de funcionamento personalizado:</label>
            <input type="text" id="horarioPersonalizado" name="horarioPersonalizado">
          </div>
          
          <div class="form-group">
            <label>Fecham para o almo√ßo?</label>
            <div class="radio-group">
              <input type="radio" id="almocoSim" name="almoco_flag" value="Sim" onchange="toggleAlmocoHorario()">
              <label for="almocoSim">Sim</label>
              <input type="radio" id="almocoNao" name="almoco_flag" value="N√£o" onchange="toggleAlmocoHorario()" checked>
              <label for="almocoNao">N√£o</label>
            </div>
          </div>

          <div class="form-group" id="almocoHorarioGroup" style="display:none;">
            <label for="horarioAlmocoSelecionado">Qual √© o hor√°rio do almo√ßo?</label>
            <select id="horarioAlmocoSelecionado" name="horarioAlmocoSelecionado">
              <option value="" disabled selected>Selecione o hor√°rio</option>
              <option value="12h00 - 13h00">12h00 - 13h00 (Padr√£o)</option>
              <option value="12h30 - 13h30">12h30 - 13h30</option>
              <option value="13h00 - 14h00">13h00 - 14h00</option>
              <option value="Outro (Detalhar nas Observa√ß√µes)">Outro (Detalhar nas Observa√ß√µes)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="emailPF">Possui algum e-mail cadastrado no Mercado Livre como pessoa f√≠sica?</label>
            <input type="text" id="emailPF" name="emailPF">
          </div>

          <div class="form-group">
            <label>O estabelecimento trabalha com mais de uma pessoa?</label>
            <div class="radio-group">
              <input type="radio" id="pessoasSim" name="maisDeUmaPessoa" value="Sim" onchange="toggleNumPessoas()">
              <label for="pessoasSim">Sim</label>
              <input type="radio" id="pessoasNao" name="maisDeUmaPessoa" value="N√£o" onchange="toggleNumPessoas()">
              <label for="pessoasNao">N√£o</label>
            </div>
          </div>
          
          <div class="form-group" id="numPessoasGroup" style="display:none;">
            <label for="numPessoas">Quantas pessoas trabalham no local?</label>
            <input type="text" id="numPessoas" name="numPessoas">
          </div>
          
          <div class="form-group">
            <label>3. Estrutura do Estabelecimento (Marque as op√ß√µes aplic√°veis):</label>
            <div class="checkbox-group-wrapper">
              <div class="checkbox-group">
                <input type="checkbox" id="estrutura_area_operacao" name="estrutura_area_operacao" value="Sim">
                <label for="estrutura_area_operacao">Possui √°rea adequada para opera√ß√£o</label>
              </div>
              <div class="checkbox-group">
                <input type="checkbox" id="estrutura_internet_estavel" name="estrutura_internet_estavel" value="Sim">
                <label for="estrutura_internet_estavel">Possui conex√£o de internet est√°vel</label>
              </div>
              <div class="checkbox-group">
                <input type="checkbox" id="estrutura_acesso_veiculos" name="estrutura_acesso_veiculos" value="Sim">
                <label for="estrutura_acesso_veiculos">Possui acesso f√°cil para ve√≠culos</label>
              </div>
              <div class="checkbox-group">
                <input type="checkbox" id="estrutura_armazenamento" name="estrutura_armazenamento" value="Sim">
                <label for="estrutura_armazenamento">Possui √°rea para armazenamento tempor√°rio</label>
              </div>
              <div class="checkbox-group">
                <input type="checkbox" id="estrutura_documentacao" name="estrutura_documentacao" value="Sim">
                <label for="estrutura_documentacao">Possui documenta√ß√£o regularizada (CNPJ/alvar√°)</label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Confirma√ß√£o de Endere√ßo (via CEP)</label>

            <div class="cep-input-group">
                <input type="text" id="cep" name="cep" placeholder="Digite o CEP (Ex: 01000-000)" maxlength="9" onkeyup="formatarCEP(this)">
                <button type="button" onclick="buscarEnderecoPorCEP()">Buscar Endere√ßo</button>
            </div>
            <small id="cepStatus" style="color:red; display:block; margin-top:5px;"></small>
          </div>

          <div class="form-group">
            <label for="enderecoCompleto">Endere√ßo Completo (Rua, N√∫mero, Cidade):</label>
            <input type="text" id="enderecoCompleto" name="enderecoCompleto" required> 
          </div>

          <div class="form-group">
            <label for="complemento">Complemento (Apartamento, Sala, Bloco):</label>
            <input type="text" id="complemento" name="complemento">
          </div>
          
          <div class="form-group">
            <label>Deseja adicionar observa√ß√µes extras?</label>
            <div class="radio-group">
              <input type="radio" id="obsSim" name="obs_flag" value="Sim" onchange="toggleObservacoes()">
              <label for="obsSim">Sim</label>
              <input type="radio" id="obsNao" name="obs_flag" value="N√£o" onchange="toggleObservacoes()" checked>
              <label for="obsNao">N√£o</label>
            </div>
          </div>
          
          <div class="form-group" id="observacoesGroup" style="display:none;">
            <label for="observacoes">Campo de Observa√ß√µes:</label>
            <textarea id="observacoes" name="observacoes" rows="4"></textarea>
          </div>

          <button type="submit" class="btn">Enviar Informa√ß√µes</button>

        </form>
      </div>
      
      <div id="Resultados" class="tab-content">
        <h2>üìä Visualiza√ß√£o e Filtro dos Resultados</h2>
        <div class="info-results">
            <p><strong>Aten√ß√£o:</strong> Os dados nesta tabela s√£o atualizados via exporta√ß√£o manual do Formspree para uma Planilha Google.</p>
            <p><strong>Substitua o texto `[SEU_ID_DA_PLANILHA]` no c√≥digo-fonte pela ID da sua Planilha.</strong></p>
            <a href="https://formspree.io/f/mqavkbow" target="_blank">Acessar Painel Formspree para Exportar o CSV</a>
        </div>
        
        <div style="width: 100%; height: 600px; margin-top: 20px;">
            <iframe 
                src="https://docs.google.com/spreadsheets/d/[SEU_ID_DA_PLANILHA]/edit?usp=sharing&widget=true&headers=false"
                width="100%" 
                height="100%" 
                frameborder="0"
            ></iframe>
        </div>
      </div>
      
    </div>
    
    <div class="footer">
      <p>Desenvolvido por Mercado Livre. ¬© 1999-2025 MercadoLibre.</p>
    </div>

    <script>
      // =========================================================
      // C√ìDIGO DE L√ìGICA CONDICIONAL
      // =========================================================
      
      function toggleCustomHorario() {
        var select = document.getElementById('horarioFunc');
        var customGroup = document.getElementById('customHorarioGroup');
        var customInput = document.getElementById('horarioPersonalizado');
        
        if (select.value === 'Personalizado') {
          customGroup.style.display = 'block';
          customInput.setAttribute('required', 'required');
        } else {
          customGroup.style.display = 'none';
          customInput.removeAttribute('required');
          customInput.value = '';
        }
      }
      
      function toggleAlmocoHorario() {
          var simRadio = document.getElementById('almocoSim');
          var almocoHorarioGroup = document.getElementById('almocoHorarioGroup');
          var almocoSelect = document.getElementById('horarioAlmocoSelecionado');

          if (simRadio.checked) {
              almocoHorarioGroup.style.display = 'block';
              almocoSelect.setAttribute('required', 'required');
          } else {
              almocoHorarioGroup.style.display = 'none';
              almocoSelect.removeAttribute('required');
              almocoSelect.value = '';
          }
      }

      function toggleNumPessoas() {
        var simRadio = document.getElementById('pessoasSim');
        var numPessoasGroup = document.getElementById('numPessoasGroup');
        var numPessoasInput = document.getElementById('numPessoas');

        if (simRadio.checked) {
          numPessoasGroup.style.display = 'block';
          numPessoasInput.setAttribute('required', 'required');
        } else {
          numPessoasGroup.style.display = 'none';
          numPessoasInput.removeAttribute('required');
          numPessoasInput.value = '';
        }
      }
      
      function toggleObservacoes() {
        var obsSimRadio = document.getElementById('obsSim');
        var observacoesGroup = document.getElementById('observacoesGroup');
        
        if (obsSimRadio.checked) {
          observacoesGroup.style.display = 'block';
        } else {
          document.getElementById('observacoes').value = '';
        }
      }
      
      // Fun√ß√£o para formatar o CEP
      function formatarCEP(input) {
          var value = input.value.replace(/\D/g, ''); 
          if (value.length > 5) {
              value = value.substring(0, 5) + '-' + value.substring(5, 8);
          }
          input.value = value;
      }

      // Fun√ß√£o para buscar endere√ßo (ViaCEP)
      function buscarEnderecoPorCEP() {
          var cepInput = document.getElementById('cep');
          var statusElement = document.getElementById('cepStatus');
          var enderecoCompleto = document.getElementById('enderecoCompleto');
          var cep = cepInput.value.replace('-', '').trim();
          
          enderecoCompleto.value = 'Buscando...';
          statusElement.innerText = '';
          
          if (cep.length !== 8) {
              statusElement.innerText = 'CEP inv√°lido. Digite 8 d√≠gitos.';
              enderecoCompleto.value = '';
              return;
          }

          fetch(`https://viacep.com.br/ws/${cep}/json/`)
              .then(response => response.json())
              .then(data => {
                  if (!data.erro) {
                      var endereco = `${data.logradouro}, ${data.bairro}, ${data.localidade} - ${data.uf}`;
                      enderecoCompleto.value = endereco;
                      statusElement.innerText = 'Endere√ßo encontrado!';
                      document.getElementById('complemento').focus();
                  } else {
                      statusElement.innerText = 'CEP n√£o encontrado. Preencha manualmente.';
                      enderecoCompleto.value = '';
                  }
              })
              .catch(error => {
                  statusElement.innerText = 'Erro na busca de CEP.';
                  enderecoCompleto.value = '';
                  console.error('Erro ViaCEP:', error);
              });
      }

      // L√≥gica de Abas
      function openTab(evt, tabName) {
        var i, tabcontent, tablinks;

        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
          tabcontent[i].classList.remove('active');
        }

        tablinks = document.getElementsByClassName("tab-button");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].classList.remove('active');
        }

        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.classList.add('active');
      }

      // L√≥gica de Submiss√£o
      document.getElementById('validacaoForm').addEventListener('submit', async function(event) {
          
          // Valida√ß√£o antes de submeter
          if (document.getElementById('enderecoCompleto').value.trim() === '') {
              document.getElementById('status').innerText = 'Por favor, busque e preencha o endere√ßo.';
              event.preventDefault(); 
              return;
          }
      });

      // Inicializa√ß√£o
      document.addEventListener('DOMContentLoaded', function() {
          toggleCustomHorario();
          toggleNumPessoas();
          document.getElementById('obsNao').checked = true;
          toggleObservacoes(); 
          document.getElementById('almocoNao').checked = true;
          toggleAlmocoHorario();

          // Define a aba Formul√°rio como ativa ao carregar
          document.getElementById('Formulario').classList.add('active');
      });
    </script>
  </body>
</html>
